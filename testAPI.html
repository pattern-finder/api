<!doctype html>
<html lang="fr">

    <head>
      <meta charset="utf-8">
      <title>Ma premi√®re page HTML</title>
      <meta http-equiv="content-type" content="text/html;charset=utf-8">
      <script
			  src="https://code.jquery.com/jquery-3.6.0.js"
			  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
			  crossorigin="anonymous"></script>
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
   </head>
   <body>
      <h1>Il s'agit d'un exemple de HTML</h1>
      <div>


      <div>
            <p id="name"></p>
            <p id="email"></p>
      </div>


      <div>
        <input id="update_user_name_button"
        type="button" 
        value="Update name">

        <input type="text" id="update_user_name" name="name" required
        minlength="4" maxlength="50" size="50">
      </div>


      <div>
        <input  id="update_user_email_button"
        type="button"
        value="Create email">

        <input type="text" id="update_user_email" name="email" required
       minlength="4" maxlength="50" size="50">
      </div>


      <div>
        <input  id="createUser"
        type="button"
        value="Create User">
      </div>


   </body>
</html>



<script type="text/javascript"> 





$('#update_user_name_button').click(function(){

data = {
      "name":$('input[name=name]').val()
}   

$.ajax({
    url : 'http://localhost:3000',
    type: 'GET',
    crossDomain: true,
    data:data,
    dataType: 'json',
    contentType: "application/json",

    success: function(data) {
      $("#name").html(data["name"]);

      console.log(data)
    },
    error: function(data) {
      console.log(data)
  },
}); 

}); 


$('#update_user_email_button').click(function(){

  data = {
      "name":$('input[name=email]').val()
} 

$.ajax({
    url : 'http://localhost:3000',
    type: 'GET',
    crossDomain: true,
    data:data,
    dataType: 'json',
    contentType: "application/json",

    success: function(data) {
      $("#email").html(data["email"]);

      console.log(data)
    },
    error: function(data) {
      console.log(data)
  },
}); 

}); 




$('#createUser').click(function(){

  data = {
    "username" : "test_username"
  }
  jsonData = JSON.stringify(data)


$.ajax({
    url : 'http://localhost:3000/test/get',
    crossDomain: true,
    type: 'GET',
    data: jsonData,
    contentType: "application/json",

    success: function(data) {
      console.log(data)
    },
    error: function(data) {
      console.log(data)
  },
}); 

}); 



</script>
